@using nsda.Utilities
@model nsda.Model.dto.response.EventResponse
@{
    Layout = "~/Areas/eventmanage/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "奖项设置";
    var eventGroup = ViewBag.EventGroup as List<nsda.Model.dto.response.EventGroupResponse>;
}
@section styles
{
    <link rel="stylesheet" href="/asset/css/eventmanageplayer.css?version=@Constant.Version">
    <link href="/asset/css/prize.css?version=@Constant.Version" rel="stylesheet" type="text/css" />
}
@Html.Partial("_left")
<div class="event-lists ">
    <input type="hidden" id="eventId" value="@Model.Id"/>
    <input type="hidden" id="eventGroupId" value="@ViewBag.EventGroupId"/>
    <div class="list-top">
        @foreach (var item in eventGroup)
        {
            if (item.Id == ViewBag.EventGroupId)
            {
                <a href="/eventmanage/eventmanage/cyclingsettingconfirm?eventId=@item.EventId&eventGroupId=@item.Id" class="active list">@item.Name</a>
            }
            else
            {
                <a href="/eventmanage/eventmanage/cyclingsettingconfirm?eventId=@item.EventId&eventGroupId=@item.Id" class="list">@item.Name</a>
            }
        }
    </div>
    <div class="event-con prize">
        <div>
            <img src="/asset/img/prize_03.png" />
            <h4>奖项设置</h4>
        </div>
        <div class="prizesetting">
            <h3>常规奖项设置</h3>
            <div class="form-group">
                <label>优秀辩手 Outstanding Speakers 取 个人排名前：</label>
                <input type="number" placeholder="输入数字" />
            </div>
            <div class="form-group">
                <label>团队奖项 取 ：</label>
                <select id="roomclass">
                    <option value="1">选择 获奖团队</option>
                    <option value="2">仅 新手组 使用（组别）</option>
                    <option value="3">仅 公开组 使用（组别）</option>
                </select>
            </div>
        </div>
        <div>
            <div class="prizetitle">
                <h5>自定义奖项设置</h5>
                <button class="addprize"><i class="iconfont icon-add1"></i> 添加奖项</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>奖项名称</th>
                        <th>奖项类型</th>
                        <th>获奖团队编码</th>
                        <th>获奖个人编号</th>
                        <th></th>

                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="operate">
                            <a href="javascript:;" class="prizebtn amend">修改</a>
                            <a href="javascript:;" class="prizebtn delete">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="operate">
                            <a href="javascript:;" class="prizebtn delete">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="operate">
                            <a href="javascript:;" class="prizebtn amend">修改</a>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
        <button class="save">确认保存设置</button>
    </div>

</div>

@section scripts
{
    <script>
        $("#addprize").click(function () {
            layer.open({
                title: "",
                type: 2,
                content: "/eventmanage/eventmanage/addprize?eventId=" + $("#eventId").val() + "&eventGroupId=" + $("#eventGroupId").val(),
                area: ["565px", "410px"],
                end: function () {

                }
            });
        });

        function renderdata()
        {

        }

        //删除
        $(document).on("click", ".delete", function () {
            $.ajax({
                url: "/eventmanage/eventmanage/deleteprize",
                type: "post",
                dataType: "json",
                data: {
                    id: $(this).attr("data-id")
                },
                beforeSend: function () {
                    layer.msg('操作中...', { shade: [0.5, '#f5f5f5'], scrollbar: false, time: 10000 });
                },
                success: function (json) {
                    layer.closeAll();
                    if (json.flag) {
                        layer.msg("删除成功", { icon: 1, time: 1000 });
                        renderdata();
                    }
                    else {
                        layer.msg(json.msg, { icon: 5, time: 1000 });
                    }
                }
             , error: function () {
                 layer.closeAll();
             }
            });
        });

        //编辑奖项
        $(document).on("click", ".update", function () {
            layer.open({
                title: "编辑奖项",
                type: 2,
                content: "/eventmanage/eventmanage/updateprize/" + $(this).attr("data-id"),
                area: ["760px", "550px"],
                end: function () {
                    renderdata();
                }
            })
        });

    </script>
}
